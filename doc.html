<!DOCTYPE html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Topoquery</title>
    <link rel="stylesheet" href="css/markdown.css">
  </head>
  <body>
    <section class="doc-nav"></section>
    <section class="doc-content">
      <h1 id="topoquery">Topoquery</h1>
<p><strong>Topoquery</strong> is a simple query system to create and manipulate states of networks and graphs.</p>
<p><em>&quot;But why ?&quot;</em>, you may wonder. Because there is no simple, portable and lightweight language to write and store networks - to our knowledge at least (if you know one, please <a href="https://github.com/topogram/topoquery/issues/2">let us know</a>).</p>
<h2 id="how-it-works">How it Works</h2>
<p>It is super simple : you input <strong>queries</strong> in plain text or via command-line to select nodes / edges and apply actions on them (add, delete, show, hide, etc).</p>
<p>It works with node or in the browser -- see the <a href="/examples"><code>/examples</code></a> folder.</p>

<h1 id="query-structure">Query structure</h1>
<pre><code>selector [ command ] [ options ]
</code></pre><p>ex.</p>
<ul>
<li><code>John</code> <code>show</code></li>
<li><code>type:animals</code> <code>hide</code></li>
<li><code>dog likes bones</code> <code>set</code> <code>type:normal</code></li>
</ul>
<p>The query will returns a JSON object containing the command</p>
<h3 id="commands">Commands</h3>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>create</code></td>
<td>create a new node or edge</td>
<td></td>
</tr>
<tr>
<td><code>show</code></td>
<td>(default) show elements based on a selector</td>
<td></td>
</tr>
<tr>
<td><code>hide</code></td>
<td>hide elements based on a selector</td>
<td></td>
</tr>
<tr>
<td><code>set</code></td>
<td>set properties for a node or an edge</td>
<td>A comma-separated list of <code>key:value</code></td>
</tr>
<tr>
<td><code>merge</code></td>
<td>merge nodes together</td>
<td>A node</td>
</tr>
<tr>
<td><code>clear</code></td>
<td>clear all previous selections</td>
</tr>
</tbody>
</table>
<h3 id="properties-and-selectors">Properties and selectors</h3>
<p>A property/selector is described as <code>name:value</code></p>
<table>
<thead>
<tr>
<th>Selector</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nodes</code></td>
<td>get all nodes</td>
</tr>
<tr>
<td><code>edges</code></td>
<td>get all edges</td>
</tr>
<tr>
<td><code>node:id</code></td>
<td>get an edge by id</td>
</tr>
<tr>
<td><code>edge:id</code></td>
<td>get an edge by id</td>
</tr>
<tr>
<td><code>nodes:key:value</code></td>
<td>get all edges where key == value</td>
</tr>
<tr>
<td><code>edges:key:value</code></td>
<td>get all edges where key == value</td>
</tr>
<tr>
<td><code>cyto:selector</code></td>
<td>use a <a href="http://js.cytoscape.org/#selectors">cytoscape selector</a></td>
</tr>
</tbody>
</table>
<p>Read the <a href="https://github.com/topogram/topogram/wiki/Topogram-graph-query-syntax">original SPEC</a> for more</p>

<h1 id="topoquery">TopoQuery</h1>
<p>TopoQuery is a parser for topogram-style query for network manipulations</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>q</code> <strong>String</strong> The query</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="lang-javascript">const q = new TopoQuery(&#39;nodes show&#39;);
</code></pre>
<h2 id="parse">parse</h2>
<p>The main function for the parser</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>q</code> <strong>String</strong> the query</li>
</ul>
<p>Returns <strong>Object</strong> An object containing selection and action</p>
<h2 id="parseaction">parseAction</h2>
<p><strong>Parameters</strong></p>
<ul>
<li><code>a</code> <strong>String</strong> The action to be executed</li>
<li><code>type</code> <strong>String</strong> The type of elements (nodes or edges)</li>
<li><code>q</code> <strong>String</strong> The original query</li>
</ul>
<p>Returns <strong>Object</strong> </p>
<h2 id="parseoptions">parseOptions</h2>
<p><strong>Parameters</strong></p>
<ul>
<li><code>action</code> <strong>String</strong> The type of action in capitals</li>
<li><code>opts</code> <strong>Array</strong> The list of options and selectors</li>
<li><code>q</code> <strong>String</strong> The original query</li>
<li><code>linkName</code>  </li>
</ul>
<p>Returns <strong>Object</strong> options properly parsed</p>
<h2 id="parseselector">parseSelector</h2>
<p><strong>Parameters</strong></p>
<ul>
<li><code>selector</code> <strong>String</strong> the raw selector as a string</li>
<li><code>s</code>  </li>
<li><code>q</code>  </li>
</ul>
<p>Returns <strong>Object</strong> the parsed selection object</p>

    </section>
  </body>
